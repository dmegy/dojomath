<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Consolidation en  mathématiques: programme"
    />
    <meta name="author" content="Damien Mégy" />
    <title>Consolidation maths : programme complet</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css"
    />

    <script type="text/javascript" src="../js/1themes.js"></script>
    <script type="text/javascript" src="../js/1chapters.js"></script>

    <style>
      .nowrap {
        max-width: 100%;
        white-space: nowrap;
      }
      body {
        margin: 0;
        padding: 1rem;
      }
    </style>
  </head>

  <body>
    <h2>DojoMath : Questions classées par chapitres et sous-chapitres</h2>
    <p>
      Cette page affiche toutes les questions de l'application classées par
      chapitres puis thèmes. Ceci permet de vérifier ce qui est proposé par
      l'appli, et éventuellement de suggérer l'ajout ou la suppression de
      questions ou de thèmes.
    </p>
    <p>
      (Avertissement : il y a plusieurs centaines de questions, MathJax met
      plusieurs secondes à mettre tout ça en forme.)
    </p>
    <div id="mainDiv">Chargement...</div>

    <script type="text/javascript">
      questions = [];
      fetch("../questions.json?again=" + Math.random())
        .then((response) => response.json())
        .then((json) => {
          questions = json;
          console.log("Questions loaded from json");
          createTable();
        });
      //
      function createTable() {
        let s = `<table id="mainTable" class="table table-striped table-bordered table-sm">
            <thead><tr>
                <th>Chapitre > thème</th>
                <th>Quest°</th>
                <th>V/F</th>
                <th>Énoncé</th>
            </tr>
            </thead>
            <tbody>`;
        for (let i = 0; i < chapters.length; i++) {
          for (let j = 0; j < chapters[i].themes.length; j++) {
            let themeId = chapters[i].themes[j].id;
            let themeLabel = chapters[i].themes[j].label;
            for (let k = 0; k < themes[themeId].questions.length; k++) {
              let questNum = themes[themeId].questions[k];
              let ligne = `<tr>
        <td class="nowrap">${i}.${j} : ${themeId} > ${themeLabel}</td>
        <td>${questNum}</td>
        <td>${questions[questNum].answer ? "V" : "F"}</td>
        <td>${questions[questNum].statement}</td>
        </tr>`;
              s += ligne;
            }
          }
        }
        s += "</tbody></table>";
        document.getElementById("mainDiv").innerHTML = s;
      }
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      	tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      	TeX: {
        		Macros: {
        			N: "{\\mathbb{N}}",
        			Z: "{\\mathbb{Z}}",
        			Q: "{\\mathbb{Q}}",
            R: "{\\mathbb{R}}",
            C: "{\\mathbb{C}}",
            U: "{\\mathbb{U}}",
            P: "{\\mathbb{P}}",
            llbracket: "{[\\![}",
            rrbracket: "{]\\!]}"
          }
        }
      });
    </script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"
    ></script>
  </body>
</html>
